(library
 (public_name quickjs)
 (name quickjs)
 (libraries quickjs_raw)
 (modules quickjs))

(library
 (public_name quickjs.raw)
 (name quickjs_raw)
 (libraries bindings)
 (modules quickjs_raw stubs)
 (foreign_archives ../vendor/quickjs)
 (foreign_stubs
  (language c)
  (names stubs)
  (include_dirs ../vendor/quickjs)))

(rule
 (targets stubs.ml stubs.c)
 (deps
  (:gen_stubs ../stubs/gen.exe))
 (action
  (run %{gen_stubs})))
